<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine Link Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>ðŸ’˜ Create Valentine Page</h1>
            
            <div class="form-group">
                <label>Your Name</label>
                <input type="text" id="yourName" placeholder="e.g. Rahul" required>
            </div>
            
            <div class="form-group">
                <label>Partner's Name</label>
                <input type="text" id="partnerName" placeholder="e.g. Anjali" required>
            </div>

            <div class="form-group">
                <label>Select Mood</label>
                <select id="mode">
                    <option value="playful">ðŸŽ® Playful (Button Bhagega)</option>
                    <option value="romantic">ðŸ’– Romantic (Cute & Emotional)</option>
                    <option value="elegant">âœ¨ Elegant (Classy & Formal)</option>
                </select>
            </div>

            <button onclick="generateLink()" class="btn-primary">Generate Link ðŸš€</button>

            <div id="resultArea" style="display:none; margin-top: 20px;">
                <p>Copy this link:</p>
                <input type="text" id="generatedLink" readonly>
                <button onclick="copyLink()" class="btn-secondary">Copy Link ðŸ“‹</button>
                
                <a id="previewBtn" href="#" target="_blank" class="btn-text">Preview Page</a>
            </div>
        </div>
    </div>

    <script>
        function generateLink() {
            const yourName = document.getElementById('yourName').value.trim();
            const partnerName = document.getElementById('partnerName').value.trim();
            const mode = document.getElementById('mode').value;

            if (!yourName || !partnerName) return alert("Please fill all details!");

            const baseUrl = window.location.origin;
            
            // NOTE: Maine '&t=' add kiya hai taaki browser purana code na uthaye (Cache Fix)
            const timestamp = new Date().getTime(); 
            const finalLink = `${baseUrl}/proposal.html?from=${encodeURIComponent(yourName)}&to=${encodeURIComponent(partnerName)}&mode=${mode}&t=${timestamp}`;

            document.getElementById('generatedLink').value = finalLink;
            document.getElementById('previewBtn').href = finalLink;
            document.getElementById('resultArea').style.display = 'block';
        }

        function copyLink() {
            const linkInput = document.getElementById('generatedLink');
            linkInput.select();
            document.execCommand("copy");
            alert("Link Copied!");
        }
    </script>
</body>
</html>